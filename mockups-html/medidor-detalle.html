<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Detalle de Medidor - Cuentas Claras</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Tokens / overrides -->
    <link href="assets/css/style.css" rel="stylesheet">
    <style>
      /* Mobile-first Styles */
      .nav-sidebar .nav-item .nav-link { color: rgba(255,255,255,0.8); }
      .nav-sidebar .nav-item .nav-link:hover { color: #fff; background-color: rgba(255,255,255,0.1); }
      .nav-sidebar .nav-item .nav-link.active { 
        color: #fff; 
        background: rgba(253,93,20,0.2);
        border-left: 3px solid var(--color-accent);
      }
      .nav-sidebar .nav-item .nav-link.active .material-icons { color: var(--color-accent); }
      
      .sidebar {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        z-index: 1000;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        width: 280px;
      }
      
      .sidebar.show {
        transform: translateX(0);
      }
      
      .sidebar-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 999;
        background-color: rgba(0,0,0,0.5);
        display: none;
      }
      
      .sidebar-backdrop.show {
        display: block;
      }
      
      @media (min-width: 992px) {
        .sidebar {
          transform: translateX(0);
        }
        
        .main-content {
          margin-left: 280px;
        }
        
        .toggle-sidebar {
          display: none;
        }
      }
      
      .avatar {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--color-primary);
        color: #fff;
        font-weight: bold;
        border-radius: 50%;
      }
      
      /* Meter header */
      .meter-header {
        border-radius: var(--radius);
        background-color: #fff;
        box-shadow: var(--shadow-sm);
        margin-bottom: 1.5rem;
        overflow: hidden;
      }
      
      .meter-info {
        padding: 1.5rem;
      }
      
      .meter-tabs {
        background-color: #f9f9fa;
        border-top: 1px solid rgba(0,0,0,0.05);
        padding: 0 1rem;
      }
      
      .meter-tabs .nav-link {
        color: var(--color-text);
        padding: 1rem 1rem;
        border: none;
        border-bottom: 2px solid transparent;
      }
      
      .meter-tabs .nav-link:hover {
        color: var(--color-primary);
      }
      
      .meter-tabs .nav-link.active {
        color: var(--color-primary);
        background-color: transparent;
        border-bottom: 2px solid var(--color-primary);
      }
      
      /* Status badges */
      .status-badge {
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        font-weight: 500;
        letter-spacing: 0.01em;
      }
      
      .status-active {
        background-color: #E8F5E9;
        color: #2E7D32;
      }
      
      .status-inactive {
        background-color: #FFEBEE;
        color: #C62828;
      }
      
      .status-maintenance {
        background-color: #FFF8E1;
        color: #F57F17;
      }
      
      /* Type badges */
      .type-badge {
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.75rem;
        font-weight: 500;
        letter-spacing: 0.01em;
      }
      
      .type-electric {
        background-color: #FFF8E1;
        color: #F57F17;
      }
      
      .type-water {
        background-color: #E3F2FD;
        color: #1565C0;
      }
      
      .type-gas {
        background-color: #FFEBEE;
        color: #C62828;
      }
      
      /* Info cards */
      .info-card {
        background-color: #fff;
        border-radius: var(--radius);
        box-shadow: var(--shadow-sm);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }
      
      .info-card-title {
        font-size: 1.1rem;
        font-weight: 500;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid #dee2e6;
      }
      
      .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid #f8f9fa;
      }
      
      .info-item:last-child {
        border-bottom: none;
      }
      
      .info-label {
        color: #6c757d;
        font-weight: 500;
      }
      
      .info-value {
        color: #212529;
        font-weight: 500;
      }
      
      /* Chart container */
      .chart-container {
        position: relative;
        height: 300px;
        margin-bottom: 1rem;
      }
      
      /* Reading table */
      .reading-table {
        background-color: #fff;
        border-radius: var(--radius);
        box-shadow: var(--shadow-sm);
        overflow: hidden;
      }
      
      .reading-table .table {
        margin-bottom: 0;
      }
      
      .reading-table .table th {
        background-color: #f8f9fa;
        border-top: none;
        font-weight: 600;
        color: #495057;
      }
      
      .reading-table .table tbody tr:hover {
        background-color: rgba(253,93,20,0.02);
      }
      
      /* Action buttons */
      .action-buttons {
        position: sticky;
        top: 20px;
        z-index: 100;
      }
      
      @media (max-width: 991.98px) {
        .action-buttons {
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          padding: 1rem;
          background-color: #fff;
          box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
          z-index: 999;
        }
        
        .main-content {
          padding-bottom: 80px;
        }
      }
      
      /* Alert indicators */
      .alert-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 0.5rem;
      }
      
      .alert-success {
        background-color: #28a745;
      }
      
      .alert-warning {
        background-color: #ffc107;
      }
      
      .alert-danger {
        background-color: #dc3545;
      }
    </style>
  </head>
  <body>
    <div class="d-flex">
      <!-- Sidebar -->
      <div class="sidebar d-flex flex-column flex-shrink-0 p-3 text-white bg-dark" style="background: linear-gradient(180deg, var(--color-primary) 0%, #071a38 100%) !important;">
        <a href="dashboard.html" class="d-flex align-items-center text-white text-decoration-none mb-4">
          <span class="material-icons me-2" style="font-size: 32px;">apartment</span>
          <span class="fs-4">Cuentas Claras</span>
        </a>
        
        <div class="d-flex align-items-center mb-3 px-2">
          <div class="avatar me-2" style="background-color: var(--color-accent);">PC</div>
          <div>
            <span class="d-block text-white">Patricia Contreras</span>
            <span class="small text-white-50">Administradora</span>
          </div>
        </div>
        
        <hr>
        
        <ul class="nav nav-sidebar flex-column mb-auto">
          <li class="nav-item">
            <a href="dashboard.html" class="nav-link px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">dashboard</span>
              <span>Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="comunidades-listado.html" class="nav-link px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">domain</span>
              <span>Comunidades</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="unidades-listado.html" class="nav-link px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">apartment</span>
              <span>Unidades</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="personas-listado.html" class="nav-link px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">people</span>
              <span>Personas</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="medidores-listado.html" class="nav-link active px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">speed</span>
              <span>Medidores</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="emisiones-listado.html" class="nav-link px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">receipt_long</span>
              <span>Emisiones</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="gastos-listado.html" class="nav-link px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">money_off</span>
              <span>Gastos</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="reportes-dashboard.html" class="nav-link px-3 py-2 mb-1">
              <span class="material-icons align-middle me-2">bar_chart</span>
              <span>Reportes</span>
            </a>
          </li>
        </ul>
        
        <hr>
        
        <div class="dropdown">
          <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="userDropdown" data-bs-toggle="dropdown">
            <span class="material-icons me-2">settings</span>
            <span>Configuración</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="userDropdown">
            <li><a class="dropdown-item" href="profile.html">Mi Perfil</a></li>
            <li><a class="dropdown-item" href="tarifas-consumo-listado.html">Tarifas de Consumo</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="login.html">Cerrar Sesión</a></li>
          </ul>
        </div>
      </div>
      
      <!-- Sidebar backdrop for mobile -->
      <div class="sidebar-backdrop" onclick="toggleSidebar()"></div>
      
      <!-- Contenido principal -->
      <div class="main-content flex-grow-1 bg-light">
        <!-- Header con búsqueda y notificaciones -->
        <header class="bg-white border-bottom shadow-sm p-3">
          <div class="container-fluid">
            <div class="row align-items-center">
              <div class="col-lg-4">
                <button class="btn toggle-sidebar d-lg-none me-2" onclick="toggleSidebar()">
                  <span class="material-icons">menu</span>
                </button>
                <div class="d-flex align-items-center">
                  <a href="medidores-listado.html" class="btn btn-outline-secondary me-2">
                    <span class="material-icons">arrow_back</span>
                  </a>
                  <div>
                    <h1 class="h5 mb-0">Medidor MED-001-2024</h1>
                    <small class="text-muted">Detalle y gestión del medidor</small>
                  </div>
                </div>
              </div>
              
              <div class="col-lg-8">
                <div class="d-flex justify-content-end align-items-center">
                  <div class="me-3">
                    <button class="btn position-relative p-0" type="button" data-bs-toggle="dropdown">
                      <span class="material-icons">notifications</span>
                      <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        2
                      </span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-end p-0" style="width: 320px;">
                      <div class="p-3 border-bottom">
                        <h6 class="mb-0">Notificaciones</h6>
                      </div>
                      <div class="list-group list-group-flush">
                        <a href="#" class="list-group-item list-group-item-action">
                          <div class="d-flex align-items-center">
                            <span class="material-icons text-warning me-3">schedule</span>
                            <div>
                              <p class="mb-0">Lectura vencida - Este medidor</p>
                              <small class="text-muted">Hace 2 días</small>
                            </div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                  
                  <div class="dropdown">
                    <a href="#" class="d-flex align-items-center text-dark text-decoration-none dropdown-toggle" id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
                      <div class="avatar me-2" style="background-color: var(--color-accent);">PC</div>
                      <div class="d-none d-sm-block">
                        <div class="fw-bold">Patricia Contreras</div>
                        <small class="text-muted">Administradora</small>
                      </div>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
                      <li><a class="dropdown-item" href="profile.html">Mi Perfil</a></li>
                      <li><a class="dropdown-item" href="#">Configuración</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item text-danger" href="login.html">Cerrar Sesión</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </header>

        <!-- Contenido -->
        <main class="container-fluid p-4">
          <div class="row">
            <div class="col-12 col-lg-8">
              <!-- Header del medidor -->
              <div class="meter-header">
                <div class="meter-info">
                  <div class="row align-items-start">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="material-icons me-2 text-warning" style="font-size: 2rem;">flash_on</span>
                        <div>
                          <h2 class="h4 mb-0">MED-001-2024</h2>
                          <small class="text-muted">Serie: ELC001245</small>
                        </div>
                      </div>
                      <div class="mb-3">
                        <span class="type-badge type-electric me-2">Electricidad</span>
                        <span class="status-badge status-active">Activo</span>
                      </div>
                      <div class="row">
                        <div class="col-sm-6">
                          <div class="d-flex align-items-center mb-2">
                            <span class="material-icons me-2 text-muted">domain</span>
                            <span>Residencial Vista Hermosa</span>
                          </div>
                          <div class="d-flex align-items-center mb-2">
                            <span class="material-icons me-2 text-muted">apartment</span>
                            <span>Unidad A-101 - Torre Norte</span>
                          </div>
                        </div>
                        <div class="col-sm-6">
                          <div class="d-flex align-items-center mb-2">
                            <span class="material-icons me-2 text-muted">today</span>
                            <span>Instalado: 15/01/2023</span>
                          </div>
                          <div class="d-flex align-items-center mb-2">
                            <span class="material-icons me-2 text-muted">schedule</span>
                            <span>Próxima lectura: 15/10/2024</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-4 text-md-end">
                      <div class="h2 mb-0 text-primary">1,245 kWh</div>
                      <small class="text-muted">Lectura actual</small>
                      <div class="mt-2">
                        <div class="d-flex align-items-center justify-content-md-end">
                          <span class="alert-indicator alert-warning"></span>
                          <small class="text-warning">Lectura vencida hace 2 días</small>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Tabs -->
                <div class="meter-tabs">
                  <ul class="nav nav-tabs border-0" id="meterTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                      <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview" type="button" role="tab">
                        <span class="material-icons me-1">dashboard</span>
                        Resumen
                      </button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="readings-tab" data-bs-toggle="tab" data-bs-target="#readings" type="button" role="tab">
                        <span class="material-icons me-1">list_alt</span>
                        Lecturas
                      </button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="consumption-tab" data-bs-toggle="tab" data-bs-target="#consumption" type="button" role="tab">
                        <span class="material-icons me-1">trending_up</span>
                        Consumo
                      </button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">
                        <span class="material-icons me-1">settings</span>
                        Configuración
                      </button>
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Tab content -->
              <div class="tab-content" id="meterTabContent">
                <!-- Resumen -->
                <div class="tab-pane fade show active" id="overview" role="tabpanel">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="info-card">
                        <div class="info-card-title">
                          <span class="material-icons me-2">info</span>
                          Información General
                        </div>
                        <div class="info-item">
                          <span class="info-label">Marca</span>
                          <span class="info-value">Siemens</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Modelo</span>
                          <span class="info-value">EM720</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Número de Serie</span>
                          <span class="info-value">ELC001245</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Fecha de Instalación</span>
                          <span class="info-value">15/01/2023</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Frecuencia de Lectura</span>
                          <span class="info-value">Mensual</span>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="info-card">
                        <div class="info-card-title">
                          <span class="material-icons me-2">trending_up</span>
                          Estadísticas de Consumo
                        </div>
                        <div class="info-item">
                          <span class="info-label">Consumo Este Mes</span>
                          <span class="info-value">125 kWh</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Promedio Mensual</span>
                          <span class="info-value">142 kWh</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Consumo Máximo</span>
                          <span class="info-value">189 kWh (Jul 2024)</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Consumo Mínimo</span>
                          <span class="info-value">98 kWh (Feb 2024)</span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">Total Acumulado</span>
                          <span class="info-value">2,847 kWh</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-card">
                    <div class="info-card-title">
                      <span class="material-icons me-2">show_chart</span>
                      Consumo Últimos 6 Meses
                    </div>
                    <div class="chart-container">
                      <canvas id="consumptionChart"></canvas>
                    </div>
                  </div>
                </div>

                <!-- Lecturas -->
                <div class="tab-pane fade" id="readings" role="tabpanel">
                  <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Historial de Lecturas</h5>
                    <a href="lecturas-medidor.html" class="btn btn-primary">
                      <span class="material-icons me-1">add</span>
                      Nueva Lectura
                    </a>
                  </div>
                  
                  <div class="reading-table">
                    <table class="table">
                      <thead>
                        <tr>
                          <th>Fecha</th>
                          <th>Lectura</th>
                          <th>Consumo</th>
                          <th>Leído por</th>
                          <th>Estado</th>
                          <th>Acciones</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>15/09/2024</td>
                          <td>1,245 kWh</td>
                          <td>125 kWh</td>
                          <td>Patricia Contreras</td>
                          <td><span class="status-badge status-active">Confirmada</span></td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editReadingModal">
                              <span class="material-icons">edit</span>
                            </button>
                          </td>
                        </tr>
                        <tr>
                          <td>15/08/2024</td>
                          <td>1,120 kWh</td>
                          <td>142 kWh</td>
                          <td>Patricia Contreras</td>
                          <td><span class="status-badge status-active">Confirmada</span></td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary">
                              <span class="material-icons">edit</span>
                            </button>
                          </td>
                        </tr>
                        <tr>
                          <td>15/07/2024</td>
                          <td>978 kWh</td>
                          <td>189 kWh</td>
                          <td>Patricia Contreras</td>
                          <td><span class="status-badge status-active">Confirmada</span></td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary">
                              <span class="material-icons">edit</span>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- Consumo -->
                <div class="tab-pane fade" id="consumption" role="tabpanel">
                  <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Análisis de Consumo</h5>
                    <a href="consumos-medidor.html" class="btn btn-outline-primary">
                      <span class="material-icons me-1">analytics</span>
                      Ver Histórico Completo
                    </a>
                  </div>
                  
                  <div class="row mb-4">
                    <div class="col-6 col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <div class="h4 mb-0 text-primary">125</div>
                          <small class="text-muted">kWh este mes</small>
                        </div>
                      </div>
                    </div>
                    <div class="col-6 col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <div class="h4 mb-0 text-success">-12%</div>
                          <small class="text-muted">vs mes anterior</small>
                        </div>
                      </div>
                    </div>
                    <div class="col-6 col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <div class="h4 mb-0 text-info">142</div>
                          <small class="text-muted">kWh promedio</small>
                        </div>
                      </div>
                    </div>
                    <div class="col-6 col-md-3">
                      <div class="card text-center">
                        <div class="card-body">
                          <div class="h4 mb-0 text-warning">$45,680</div>
                          <small class="text-muted">Costo estimado</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-card">
                    <div class="info-card-title">
                      <span class="material-icons me-2">timeline</span>
                      Tendencia de Consumo (Últimos 12 Meses)
                    </div>
                    <div class="chart-container">
                      <canvas id="trendChart"></canvas>
                    </div>
                  </div>
                </div>

                <!-- Configuración -->
                <div class="tab-pane fade" id="settings" role="tabpanel">
                  <form id="meterSettingsForm">
                    <div class="info-card">
                      <div class="info-card-title">
                        <span class="material-icons me-2">settings</span>
                        Configuración del Medidor
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label for="status" class="form-label">Estado</label>
                          <select class="form-select" id="status" name="status">
                            <option value="active" selected>Activo</option>
                            <option value="inactive">Inactivo</option>
                            <option value="maintenance">En Mantenimiento</option>
                          </select>
                        </div>
                        <div class="col-md-6 mb-3">
                          <label for="readingFrequency" class="form-label">Frecuencia de Lectura</label>
                          <select class="form-select" id="readingFrequency" name="readingFrequency">
                            <option value="monthly" selected>Mensual</option>
                            <option value="bimonthly">Bimestral</option>
                            <option value="quarterly">Trimestral</option>
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label for="multiplier" class="form-label">Multiplicador</label>
                          <input type="number" class="form-control" id="multiplier" name="multiplier" value="1" step="0.01">
                        </div>
                        <div class="col-md-6 mb-3">
                          <label for="digits" class="form-label">Dígitos del Medidor</label>
                          <select class="form-select" id="digits" name="digits">
                            <option value="5">5 dígitos</option>
                            <option value="6" selected>6 dígitos</option>
                            <option value="7">7 dígitos</option>
                          </select>
                        </div>
                      </div>
                      <div class="mb-3">
                        <div class="form-check form-switch">
                          <input class="form-check-input" type="checkbox" id="autoReading" name="autoReading">
                          <label class="form-check-label" for="autoReading">
                            Lectura Automática
                          </label>
                        </div>
                      </div>
                    </div>
                    
                    <div class="info-card">
                      <div class="info-card-title">
                        <span class="material-icons me-2">description</span>
                        Notas y Observaciones
                      </div>
                      <div class="mb-3">
                        <textarea class="form-control" id="notes" name="notes" rows="4" placeholder="Información adicional sobre el medidor...">Medidor instalado en cuarto de medidores, planta baja. Fácil acceso para lectura.</textarea>
                      </div>
                    </div>
                    
                    <div class="d-flex justify-content-end gap-2">
                      <button type="button" class="btn btn-outline-secondary">Cancelar</button>
                      <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            
            <!-- Sidebar derecha con acciones -->
            <div class="col-12 col-lg-4">
              <div class="action-buttons">
                <div class="d-grid gap-2 mb-3">
                  <a href="lecturas-medidor.html" class="btn btn-primary">
                    <span class="material-icons me-1">add_circle</span>
                    Nueva Lectura
                  </a>
                  <a href="consumos-medidor.html" class="btn btn-outline-primary">
                    <span class="material-icons me-1">analytics</span>
                    Ver Histórico Completo
                  </a>
                  <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#maintenanceModal">
                    <span class="material-icons me-1">build</span>
                    Programar Mantenimiento
                  </button>
                </div>
                
                <div class="info-card">
                  <div class="info-card-title">
                    <span class="material-icons me-2">notifications</span>
                    Alertas y Notificaciones
                  </div>
                  <div class="alert alert-warning d-flex align-items-center" role="alert">
                    <span class="material-icons me-2">schedule</span>
                    <div>
                      <div class="fw-bold">Lectura Vencida</div>
                      <small>La próxima lectura está vencida hace 2 días</small>
                    </div>
                  </div>
                  <div class="alert alert-info d-flex align-items-center" role="alert">
                    <span class="material-icons me-2">trending_down</span>
                    <div>
                      <div class="fw-bold">Consumo Reducido</div>
                      <small>El consumo bajó 12% este mes</small>
                    </div>
                  </div>
                </div>
                
                <div class="info-card">
                  <div class="info-card-title">
                    <span class="material-icons me-2">history</span>
                    Actividad Reciente
                  </div>
                  <div class="timeline">
                    <div class="d-flex mb-3">
                      <span class="material-icons text-muted me-2">edit</span>
                      <div>
                        <div class="fw-bold">Lectura registrada</div>
                        <small class="text-muted">15/09/2024 - 1,245 kWh</small>
                      </div>
                    </div>
                    <div class="d-flex mb-3">
                      <span class="material-icons text-muted me-2">info</span>
                      <div>
                        <div class="fw-bold">Configuración actualizada</div>
                        <small class="text-muted">10/09/2024 - Frecuencia cambiada</small>
                      </div>
                    </div>
                    <div class="d-flex">
                      <span class="material-icons text-muted me-2">build</span>
                      <div>
                        <div class="fw-bold">Mantenimiento completado</div>
                        <small class="text-muted">05/09/2024 - Calibración realizada</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/script.js"></script>
    <script>
      function toggleSidebar() {
        const sidebar = document.querySelector('.sidebar');
        const backdrop = document.querySelector('.sidebar-backdrop');
        
        sidebar.classList.toggle('show');
        backdrop.classList.toggle('show');
      }

      // Initialize charts
      document.addEventListener('DOMContentLoaded', function() {
        // Consumption chart
        const consumptionCtx = document.getElementById('consumptionChart');
        if (consumptionCtx) {
          new Chart(consumptionCtx, {
            type: 'line',
            data: {
              labels: ['Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep'],
              datasets: [{
                label: 'Consumo (kWh)',
                data: [156, 142, 168, 189, 142, 125],
                borderColor: 'rgb(253, 93, 20)',
                backgroundColor: 'rgba(253, 93, 20, 0.1)',
                tension: 0.1
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: {
                  beginAtZero: true
                }
              }
            }
          });
        }

        // Trend chart
        const trendCtx = document.getElementById('trendChart');
        if (trendCtx) {
          new Chart(trendCtx, {
            type: 'bar',
            data: {
              labels: ['Oct', 'Nov', 'Dic', 'Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep'],
              datasets: [{
                label: 'Consumo (kWh)',
                data: [134, 145, 167, 156, 98, 145, 156, 142, 168, 189, 142, 125],
                backgroundColor: 'rgba(253, 93, 20, 0.8)'
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: {
                  beginAtZero: true
                }
              }
            }
          });
        }
      });

      // Form submission
      document.getElementById('meterSettingsForm').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('Configuración guardada exitosamente');
      });
    </script>
  </body>
</html>